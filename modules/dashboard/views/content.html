<header class="header">
  <h1>Dashboard</h1>
</header>
<div id="passwordChangedMessage" class="success-message" style="display: none; background: #ecfdf5; color: #059669; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
  Ihr Passwort wurde erfolgreich geändert.
</div>
<div class="u2-grid">

  <div class="card">
    <div>
      <div>
        <h3>
          <i class="mdi mdi-server" style="font-size: 2rem;"></i>
          System Information
        </h3>
      </div>
    </div>
    <div style="margin-top: 1rem;">
      <dl class="cd-left-right">
        <dt>System</dt>
        <dd id="systemInfo">...</dd>
        
        <dt>IP-Adresse</dt>
        <dd id="ipAddress">...</dd>
        
        <dt>Uptime</dt>
        <dd>
          <u2-time type="relative" second id="uptime">...</u2-time>
        </dd>
      </dl>
      
      <div>
        <p>
          <strong>CPU</strong>
          <span id="cpuPercentage">0%</span>
          <progress id="cpuUsage" value="0" max="100" style="width:100%"></progress>
        </p>
        
        <p>
          <strong>RAM</strong>
          <span id="ramPercentage">0%</span>
          <progress id="ramUsage" value="0" max="100" style="width:100%"></progress>
        </p>
        
        <p>
          <strong>Disk</strong>
          <span id="diskPercentage">0%</span>
          <progress id="diskUsage" value="0" max="100" style="width:100%"></progress>
        </p>
      </div>
    </div>
  </div>

  <div class="card">
    <div class="stat">
      <div class="stat-info">
        <h3 id="">
          <i class="mdi mdi-domain" style="font-size: 2rem;"></i>
          <span id="domainCount">...</span>
          Domains
        </h3>
      </div>
    </div>
    <table style="margin-bottom: 1rem;">
      <thead>
        <tr>
          <th>Domain
          <th>Status
      <tbody id="domainList">
        <tr>
          <td colspan="2">Lädt...
    </table>
    <a href="/domains#addDomainModal" class="btn">
      <i class="mdi mdi-plus"></i>
      Domain hinzufügen
    </a>
  </div>

  <div class="card">
    <div class="stat">
      <div class="stat-info">
        <h3>
          <i class="mdi mdi-account-group" style="font-size: 2rem;"></i>
          <span id="userCount">...</span>
          Benutzer
        </h3>
      </div>
    </div>
    <table style="margin-bottom: 1rem;">
      <thead>
        <tr>
          <th>Benutzer
          <th>E-Mail Adresse
      <tbody id="userList">
        <tr><td colspan="2">Lädt...
    </table>
    <a href="/users#addUserModal" class="btn">
      <i class="mdi mdi-plus"></i>
      Benutzer hinzufügen
    </a>
  </div>
  <div class="card">
    <div class="stat">
      <div class="stat-info">
        <h3>
          <i class="mdi mdi-text-box-search" style="font-size: 2rem;"></i>
          Letzte Aktivitäten
        </h3>
      </div>
    </div>
    <table>
      <thead>
        <tr>
          <th>Zeit
          <th>Ereignis
      <tbody id="activityList">
        <tr><td colspan="2">Lädt...
    </table>
  </div>

  <div class="card">
    <h2>Tools</h2>
  
    <button onclick="restartNebula()" class="btn btn-warning">
        Restart Nebula
    </button>
  </div>
  
</div>


<script>
async function restartNebula() {
    if (!confirm('Are you sure you want to restart Nebula?')) return;
    try {
        const response = await fetch('/api/nebula/restart', {post:{}});
        if (!response.ok) throw new Error('Restart failed');
        alert('Nebula is restarting...');
    } catch (error) {
        alert('Failed to restart Nebula: ' + error.message);
    }
}
</script>

