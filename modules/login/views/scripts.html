<script type="module">
import { apiFetch } from '/public/js/utils.js';

// Check for password change success message
if (window.location.search.includes('passwordChanged=true')) {
  const message = document.getElementById('passwordChangedMessage');
  message.style.display = 'block';
  setTimeout(() => {
    message.style.display = 'none';
  }, 5000);
}

// Profildaten laden
async function loadProfileData() {
  try {
    const user = await apiFetch('/api/clients/me');
    
    // Benutzerdaten anzeigen
    document.getElementById('userLogin').textContent = user.login;
    document.getElementById('userEmail').textContent = user.email || '-';
  } catch (error) {
    alert('Fehler beim Laden der Profildaten: ' + error.message);
  }
}

// Initial load
loadProfileData();
</script>